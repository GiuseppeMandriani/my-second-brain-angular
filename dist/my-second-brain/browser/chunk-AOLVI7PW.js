import{a as Q,b as W}from"./chunk-XS5AQQHL.js";import{a as _}from"./chunk-LO7TS6CY.js";import{i as G,o as K}from"./chunk-IDMV7M3F.js";import"./chunk-3DYFUAHW.js";import{$ as u,$a as r,Ea as H,Ja as m,Na as P,O as L,T as S,U as O,Ua as c,Wa as j,Ya as V,Za as $,_a as i,a as M,aa as f,ab as h,b as N,bb as C,cb as l,db as F,ia as T,jb as q,kb as p,lb as U,mb as v,na as w,nb as B,ob as A,rb as J,sb as z,za as s,zb as R}from"./chunk-ZSQUZFEO.js";var b=class n{msg="Errore";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-http-error"]],inputs:{msg:"msg"},decls:2,vars:1,consts:[[1,"bg-red-400","rounded-xl","p-3","text-black"]],template:function(e,o){e&1&&(i(0,"div",0),p(1),r()),e&2&&(s(),v(" ",o.msg,`
`))},encapsulation:2})};var I=class n{completed;todos;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-todos-summary"]],inputs:{completed:"completed",todos:"todos"},decls:2,vars:2,template:function(e,o){e&1&&(i(0,"div"),p(1),r()),e&2&&(s(),B("",o.completed," completed | ",o.todos," todos"))},encapsulation:2,changeDetection:0})};var x=class n{addTodo=new T;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-todos-form"]],outputs:{addTodo:"addTodo"},decls:2,vars:0,consts:[["inputRef",""],["type","text","placeholder","add todo",1,"input","input-bordered",3,"keydown.enter"]],template:function(e,o){if(e&1){let d=C();i(0,"input",1,0),l("keydown.enter",function(){u(d);let X=q(1);return f(o.addTodo.emit(X))}),r()}},encapsulation:2,changeDetection:0})};var Y=n=>({"line-through":n}),Z=(n,t)=>t.id;function ee(n,t){if(n&1){let e=C();i(0,"li",0)(1,"div",1)(2,"input",2),l("change",function(){let d=u(e).$implicit,a=F();return f(a.toggle(d))}),r(),i(3,"span",3),p(4),r()(),i(5,"button",4),l("click",function(){let d=u(e).$implicit,a=F();return f(a.delete(d))}),p(6,"\u274C"),r()()}if(n&2){let e=t.$implicit;s(2),c("checked",e.completed),s(),c("ngClass",A(3,Y,e.completed)),s(),v(" ",e.title," ")}}var E=class n{todos=[];toggleTodo=new T;deleteTodo=new T;toggle(t){this.toggleTodo.emit(t)}delete(t){this.deleteTodo.emit(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-todos-list"]],inputs:{todos:"todos"},outputs:{toggleTodo:"toggleTodo",deleteTodo:"deleteTodo"},decls:3,vars:0,consts:[[1,"flex","justify-between"],[1,"flex","gap-3"],["type","checkbox",3,"change","checked"],[3,"ngClass"],[3,"click"]],template:function(e,o){e&1&&(i(0,"ul"),V(1,ee,7,5,"li",0,Z),r()),e&2&&(s(),$(o.todos))},dependencies:[G],encapsulation:2,changeDetection:0})};var D=class n extends Q{constructor(e,o){super(e,o,"localTodo");this.httpClient=e;this.relativeEndpoint="/local-todos"}getTodo(){return this._get(this.relativeEndpoint)}deleteTodo(e){return this._delete(`${this.relativeEndpoint}/${e.id}`)}addTodo(e){return this._post(this.relativeEndpoint,e)}updateTodo(e){return this._patch(`${this.relativeEndpoint}/${e.id}`,e)}static \u0275fac=function(o){return new(o||n)(S(_),S(W))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function oe(n,t){n&1&&h(0,"app-http-error",3),n&2&&c("msg","Server Error")}var k=class n{constructor(t){this.toDoService=t}title="";todos=w([]);http=O(_);error=w(!1);totalCompleted=R(()=>this.todos().filter(t=>t.completed).length);totalTodos=R(()=>this.todos().filter(t=>!t.completed).length);ngOnInit(){this.toDoService.getTodo().subscribe({next:t=>{this.todos.set(t)},error:t=>{console.error("Error fetching todos:",t),this.error.set(!0)},complete:()=>{console.log("Todos fetched successfully")}})}addTodo(t){this.error.set(!1),this.toDoService.addTodo({title:t.value,completed:!1}).subscribe({next:e=>{this.todos.update(o=>[...o,e])},error:e=>{console.error("Error fetching todos:",e),this.error.set(!0)}}),t.value=""}removeTodo(t){this.error.set(!1),t&&t.id&&this.toDoService.deleteTodo({id:t.id}).subscribe({next:()=>{this.todos.update(e=>e.filter(o=>o.id!==t.id))},error:e=>{console.error("Error fetching todos:",e),this.error.set(!0)}})}toggleTodo(t){this.error.set(!1),t&&t.id&&this.toDoService.updateTodo(N(M({},t),{completed:!t.completed})).subscribe({next:e=>{this.todos.update(o=>o.map(d=>d.id===t.id?e:d))},error:e=>{console.error("Error fetching todos:",e),this.error.set(!0)}})}saveAll(){console.log(this.todos)}static \u0275fac=function(e){return new(e||n)(H(D))};static \u0275cmp=m({type:n,selectors:[["app-demo-2"]],inputs:{title:"title"},decls:13,vars:7,consts:[[1,"my-5"],[1,"centered-page","sm","flex","flex-col","gap-3"],[1,"page-title"],[3,"msg"],[3,"completed","todos"],[3,"addTodo"],[3,"toggleTodo","deleteTodo","todos"]],template:function(e,o){e&1&&(i(0,"p"),p(1),J(2,"uppercase"),r(),h(3,"hr"),i(4,"h1",0),p(5,"To DO Server"),r(),i(6,"div",1)(7,"h1",2),p(8,"Todo List"),r(),P(9,oe,1,1,"app-http-error",3),h(10,"app-todos-summary",4),i(11,"app-todos-form",5),l("addTodo",function(a){return o.addTodo(a)}),r(),i(12,"app-todos-list",6),l("toggleTodo",function(a){return o.toggleTodo(a)})("deleteTodo",function(a){return o.removeTodo(a)}),r()()),e&2&&(s(),U(z(2,5,o.title)),s(8),j(o.error()?9:-1),s(),c("completed",o.totalCompleted())("todos",o.totalTodos()),s(2),c("todos",o.todos()))},dependencies:[K,b,I,x,E],encapsulation:2})};export{k as default};
