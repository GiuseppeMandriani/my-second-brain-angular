import{a as J,b as M}from"./chunk-RL24P74V.js";import{a as z,b as G}from"./chunk-BBY3Z5IE.js";import{o as A,p as B}from"./chunk-AS2ZFSWH.js";import{a as d}from"./chunk-CQDR5DQX.js";import"./chunk-X65C7LAG.js";import{$ as _,C as j,Db as b,Eb as g,H as k,Ha as l,Ma as $,Mb as q,Ob as w,Ra as H,T,Va as F,W as P,aa as I,c as E,e as R,gb as L,hb as N,ib as u,jb as c,kb as r,lb as n,mb as m,o as y,ob as f,va as S,wb as s,xb as a,y as D,yb as O}from"./chunk-SKNG6EFK.js";var h=class t extends J{constructor(i,o){super(i,o,"users");this.httpClient=i}getUsers(){return this._get(this.baseUrl)}static \u0275fac=function(o){return new(o||t)(_(d),_(M))};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})};var x=(t,e)=>e.id;function V(t,e){if(t&1&&(r(0,"li"),s(1),n()),t&2){let i=e.$implicit;l(),a(i.name)}}function W(t,e){if(t&1&&(r(0,"li"),s(1),n()),t&2){let i=e.$implicit;l(),a(i.name)}}function X(t,e){if(t&1&&(r(0,"li"),s(1),n()),t&2){let i=e.$implicit;l(),a(i)}}function Y(t,e){t&1&&(r(0,"div"),s(1,"loading..."),n())}function Z(t,e){if(t&1&&(r(0,"li",3),s(1),n(),r(2,"p"),s(3),n()),t&2){let i=e.$implicit;l(),a(i.title),l(2),a(i.body)}}var U=class t{constructor(e){this.userService=e;this.userService.getUsers().subscribe(i=>{this.usersSignal.set(i)}),this.getUsersList()}title="";http=I(d);users=[];usersSignal=S([]);usersList=z(I(d).get("https://jsonplaceholder.typicode.com/users").pipe(k(2e3)));names=q(()=>this.usersList()?.map(e=>e.name));subscriptions=[];userId=S(1);userResource=w({request:this.userId,loader:o=>E(this,[o],function*({request:e,abortSignal:i}){return yield(yield fetch(`https://jsonplaceholder.typicode.com/users/${e}`,{signal:i})).json()})});userResourceName=G({request:this.userId,loader:({request:e})=>D({user:this.http.get(`https://jsonplaceholder.typicode.com/users/${e}`),posts:this.http.get(`https://jsonplaceholder.typicode.com/posts?userId=${e}`)})});ngOnInit(){}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}getUsersList(){this.subscriptions.push(this.userService.getUsers().pipe(T(e=>{console.log(e),e&&(this.users=e)}),j(e=>(console.error(e),y(null)))).subscribe(R))}refresh(){this.userResource.reload()}nextUser(){this.userId.update(e=>e<10?e+1:1)}prevUser(){this.userId.update(e=>e>1?e-1:10)}static \u0275fac=function(i){return new(i||t)($(h))};static \u0275cmp=H({type:t,selectors:[["app-demo-1"]],inputs:{title:"title"},decls:41,vars:10,consts:[[1,"my-3"],[1,"flex","gap-3"],[1,"btn",3,"click"],[1,"text-2xl","my-3"]],template:function(i,o){if(i&1&&(r(0,"p"),s(1),b(2,"uppercase"),n(),m(3,"hr"),r(4,"h1",0),s(5,"HttpClient Demo"),n(),u(6,V,2,1,"li",null,x),m(8,"hr"),r(9,"h1"),s(10,"Http Signals"),n(),u(11,W,2,1,"li",null,x),m(13,"hr"),r(14,"h1"),s(15,"Http toSignals"),n(),u(16,X,2,1,"li",null,N),m(18,"hr"),r(19,"h1"),s(20,"RESOURCE API"),n(),r(21,"h2"),s(22),n(),r(23,"div",1)(24,"button",2),f("click",function(){return o.prevUser()}),s(25,"Prev User"),n(),r(26,"button",2),f("click",function(){return o.nextUser()}),s(27,"Next User"),n()(),F(28,Y,2,0,"div"),r(29,"h1"),s(30),n(),r(31,"pre"),s(32),b(33,"json"),n(),m(34,"hr"),r(35,"h1",3),s(36),n(),u(37,Z,4,2,null,null,x),r(39,"button",2),f("click",function(){return o.refresh()}),s(40,"Refresh last data"),n()),i&2){let p,v,C;l(),a(g(2,6,o.title)),l(5),c(o.users),l(5),c(o.usersSignal()),l(5),c(o.names()),l(6),O("Actual user ",o.userId(),""),l(6),L(o.userResource.isLoading()?28:-1),l(2),a((p=o.userResource.value())==null?null:p.name),l(2),a(g(33,8,o.userResource.value())),l(4),a((v=o.userResourceName.value())==null||v.user==null?null:v.user.name),l(),c((C=o.userResourceName.value())==null?null:C.posts)}},dependencies:[A,B],encapsulation:2})};export{U as default};
