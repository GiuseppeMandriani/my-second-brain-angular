import{a as O,b as H,c as L,d as M,e as N}from"./chunk-KMBHDENC.js";import"./chunk-BS7LHHWF.js";import{o as I}from"./chunk-LEGQLTLF.js";import{a as x}from"./chunk-3WH6QEWM.js";import"./chunk-5ANNPB5B.js";import{Eb as b,Fb as y,Ia as p,Na as v,Nb as u,Sa as C,Wa as S,a as T,aa as g,b as _,fb as l,hb as D,lb as r,mb as i,nb as m,pb as f,wa as c,xb as a,yb as E}from"./chunk-72W4SQTP.js";function P(n,e){n&1&&m(0,"app-http-error",3),n&2&&l("msg","Server Error")}var h=class n{constructor(e){this.toDoService=e}title="";todos=c([]);http=g(x);error=c(!1);totalCompleted=u(()=>this.todos().filter(e=>e.completed).length);totalTodos=u(()=>this.todos().filter(e=>!e.completed).length);ngOnInit(){this.toDoService.getTodo().subscribe({next:e=>{this.todos.set(e)},error:e=>{console.error("Error fetching todos:",e),this.error.set(!0)},complete:()=>{console.log("Todos fetched successfully")}})}addTodo(e){this.error.set(!1),this.toDoService.addTodo({title:e.value,completed:!1}).subscribe({next:o=>{this.todos.update(t=>[...t,o])},error:o=>{console.error("Error fetching todos:",o),this.error.set(!0)}}),e.value=""}removeTodo(e){this.error.set(!1),e&&e.id&&this.toDoService.deleteTodo({id:e.id}).subscribe({next:()=>{this.todos.update(o=>o.filter(t=>t.id!==e.id))},error:o=>{console.error("Error fetching todos:",o),this.error.set(!0)}})}toggleTodo(e){this.error.set(!1),e&&e.id&&this.toDoService.updateTodo(_(T({},e),{completed:!e.completed})).subscribe({next:o=>{this.todos.update(t=>t.map(s=>s.id===e.id?o:s))},error:o=>{console.error("Error fetching todos:",o),this.error.set(!0)}})}saveAll(){console.log(this.todos)}static \u0275fac=function(o){return new(o||n)(v(N))};static \u0275cmp=C({type:n,selectors:[["app-demo-2"]],inputs:{title:"title"},decls:13,vars:7,consts:[[1,"my-5"],[1,"centered-page","sm","flex","flex-col","gap-3"],[1,"page-title"],[3,"msg"],[3,"completed","todos"],[3,"addTodo"],[3,"toggleTodo","deleteTodo","todos"]],template:function(o,t){o&1&&(r(0,"p"),a(1),b(2,"uppercase"),i(),m(3,"hr"),r(4,"h1",0),a(5,"To DO Server"),i(),r(6,"div",1)(7,"h1",2),a(8,"Todo List"),i(),S(9,P,1,1,"app-http-error",3),m(10,"app-todos-summary",4),r(11,"app-todos-form",5),f("addTodo",function(d){return t.addTodo(d)}),i(),r(12,"app-todos-list",6),f("toggleTodo",function(d){return t.toggleTodo(d)})("deleteTodo",function(d){return t.removeTodo(d)}),i()()),o&2&&(p(),E(y(2,5,t.title)),p(8),D(t.error()?9:-1),p(),l("completed",t.totalCompleted())("todos",t.totalTodos()),p(2),l("todos",t.todos()))},dependencies:[I,O,H,L,M],encapsulation:2})};export{h as default};
